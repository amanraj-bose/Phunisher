from requests import get
from bs4 import BeautifulSoup
from re import compile
import requests.exceptions
from os import system
from modules.colour import color as cl
from modules.colour import bright as br

def html(urls:str, tags:str, options:str, username:str)->str:
    r = get(str(urls))
    soup = BeautifulSoup(r.content, 'html.parser')
    tag = str(tags)
    try:
        entery = str(options)
        if entery == "1" or entery == "01":
            with open('parse_data.html', 'w') as g:
                    g.writelines(str(f"""
<!--Extracted By Phunisher Framework -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Data From Phunisher FrameWork</title>
</head>
<body>
    {soup.find_all(tag)}
</body>
</html>
                    """))
            system(f"sudo mv parse_data.html /home/{username}/Desktop/")
            print(f"\n{br.red_1}Your File {br.white_1}|-----> {br.blue_1}/home/{br.green_1}{username}{br.blue_1}/Desktop/\n")
        else:
            for items in soup.find_all(tag):
                    print(items)
    except KeyboardInterrupt and Exception and requests.exceptions.ConnectionError and requests.exceptions.InvalidURL and requests.exceptions.Timeout and requests.exceptions.RequestException:
            print("")
