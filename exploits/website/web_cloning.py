from os import system
import requests
from modules.colour import bright as br
from bs4 import BeautifulSoup
from webbrowser import open_new_tab
import requests.exceptions


def url(url, filename, choose, login_name) -> str:
    try:
        url = str(url)
        r = requests.get(url)
        html = r.text
        soup = BeautifulSoup(html, 'html.parser')
        x = str(filename)
        with open(x, "w") as f:
            f.write(soup.prettify())
            ok = str(choose)
            if ok == "y" or ok == "Y":
                system(f"sudo cp -r {x} /home/{str(login_name)}/Desktop/")
                open_new_tab(f"{x}")
                system(f"sudo rm -r {x}")
                print(f"\n{br.cyan_1}Check Your Desktop Folder and Your Filename is : {br.green_1}{x}")
            else:
                system(f"sudo mv {x} /home/{str(login_name)}/Desktop/")
                print(f"\n{br.cyan_1}Check Your Desktop Folder and Your Filename is : {br.green_1}{x}")
    except requests.exceptions.ConnectTimeout and requests.exceptions.HTTPError and requests.exceptions.ConnectionError and requests.exceptions.MissingSchema and Exception and KeyboardInterrupt as e:
        print(
            f"{br.red_1}[*] {br.white}Sorry Your Internet Connection failed, try again")