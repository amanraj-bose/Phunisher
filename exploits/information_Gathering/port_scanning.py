import socket
import concurrent.futures 
from modules.colour import color as cl


def port_scan(ipv4,portsv4) -> str:
    ip = str(ipv4)

    def scan(ip, ports):
        Scanner = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        Scanner.settimeout(1)
        try:
            Scanner.connect((ip, port))
            Scanner.close()
            print(
                f"{cl.blue}Ports Number {cl.white}: {cl.red}[{cl.green}{port}{cl.red}]" + f"{cl.green}Opened{cl.white}")
        except KeyboardInterrupt and ValueError and socket.gaierror and socket.timeout and socket.herror and socket.error as e:
            print("")

    with concurrent.futures.ThreadPoolExecutor(max_workers=100) as executor:
        for port in range(int(float(portsv4))):
            executor.submit(scan, ip, port + 1)